<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<style>
#div1{ width:200px; height:200px; background:#ccc; margin:50px auto; line-height:200px; text-align:center; font-size:40px; color:#fff; position:relative; overflow:hidden;}
#div1 span{ position:absolute; left:-200px; top:0; width:200px; height:200px; background:red;}
</style>
<script src="move.js"></script>
<script>
function hoverDir(obj,oEvent){
	var scrollT=document.body.scrollTop || document.documentElement.scrollTop;
	var scrollL=document.body.scrollLeft || document.documentElement.scrollLeft;
	var w=obj.offsetWidth;
	var h=obj.offsetHeight;
	var x=obj.offsetLeft+w/2-oEvent.clientX+scrollL;
	var y=obj.offsetTop+h/2-oEvent.clientY+scrollT;
	return Math.round((Math.atan2(y,x)*180/Math.PI+180)/90)%4;
}
window.onload=function(){
	var oDiv=document.getElementById('div1');
	var oSpan=oDiv.children[0];
	
	oDiv.onmouseenter=function(ev){
		var oEvent=ev || event;
		var n=hoverDir(oDiv,oEvent);
		switch(n){
			case 0:
				oSpan.style.left=200+'px';
				oSpan.style.top=0;
				break;
			case 1:
				oSpan.style.top=200+'px';
				oSpan.style.left=0;
				break;
			case 2:
				oSpan.style.left=-200+'px';
				oSpan.style.top=0;
				break;
			case 3:
				oSpan.style.top=-200+'px';
				oSpan.style.left=0;
				break;
		}
		startMove(oSpan,{left:0, top:0});
	};
	
	oDiv.onmouseleave=function(ev){
		var oEvent=ev || event;
		var n=hoverDir(oDiv,oEvent);
		switch(n){
			case 0:
				startMove(oSpan,{left:200,top:0});
				break;
			case 1:
				startMove(oSpan,{left:0, top:200});
				break;
			case 2:
				startMove(oSpan,{left:-200, top:0});
				break;
			case 3:
				startMove(oSpan,{left:0, top:-200});
				break;
		}
	};
};
</script>
</head>

<body>
<div id="div1">
	<span>我是层</span>
</div>
</body>
</html>
