<!doctype html>
<html>
<head>
<meta charset="utf-8">
<title></title>
<style>
*{ margin:0; padding:0; list-style:none;}
#btn1{width:120px; height:40px;}
#ul1{ width:630px; margin:50px auto;}
#ul1 li{ width:200px; height:200px; text-align:center; line-height:200px; float:left; margin:5px; background:#ccc; }
</style>
<script src="move.js"></script>
<script>
	window.onload=function(){
        var oBtn=document.getElementById('btn1');
        var oUl=document.getElementById('ul1');
        var aLi=oUl.children;
        var aPos=[];
        for(var i=0;i<aLi.length;i++){
            aPos[i]={left:aLi[i].offsetLeft,top:aLi[i].offsetTop}
        }
        for(var i=0;i<aLi.length;i++){
            aLi[i].style.left=aPos[i].left+'px';
            aLi[i].style.top=aPos[i].top+'px';
            aLi[i].style.position='absolute';
            aLi[i].style.margin=0;
        }
        var timer=null;
        oBtn.onclick=function(){
            var i=0;timer=setInterval(function(){
                (function(index){
                    startMove(aLi[i],{width:0,height:0,opacity:0,left:0,top:0},{end:function(){
                        if(index==aLi.length-1){
                            for(var i=0;i<aLi.length;i++){
                                aLi[i].style.background='rgb('+parseInt(Math.random()*256)+','+parseInt(Math.random()*256)+','+parseInt(Math.random()*256)+')'
                            }
                            i=aLi.length-1;
                            timer=setInterval(function(){
                                startMove(aLi[i],{width:200,height:200,opacity:1,left:aPos[i].left,top:aPos[i].top});
                                i--;
                                if(i==-1){
                                    clearInterval(timer)}},100)}}})})(i);
                                    i++;
                                    if(i==aLi.length){
                                        clearInterval(timer)
                                    }
                                },100)}};
</script>
</head>

<body>
<input type="button" value="走一个" id="btn1">
<ul id="ul1">
	<li>0</li>
    <li>1</li>
    <li>2</li>
    <li>3</li>
    <li>4</li>
    <li>5</li>
    <li>6</li>
    <li>7</li>
    <li>8</li>
</ul>
</body>
</html>
